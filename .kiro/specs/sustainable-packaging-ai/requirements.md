# サステナ素材置換AI for 包装 - 要件定義

## 概要

食品包装メーカー向けの、既存包装材を持続可能な代替素材に置換するためのAI支援プラットフォーム。Convexデータベースに格納されたサステナブル素材情報とWeb上の最新情報を組み合わせて、LLM APIが最適な代替素材を提案し、ビジュアル比較レポートを提供する。

## 機能要件

### FR-001: 製品シナリオ選択機能

WHEN ユーザーがシステムにアクセスし、製品タイプを選択する必要がある時
THE SYSTEM SHALL 事前定義された製品シナリオ（ポテトチップス袋、冷凍食品パウチ等）のドロップダウンリストを表示する

### FR-002: 自動フォーム入力

WHEN ユーザーが特定の製品シナリオを選択した時
THE SYSTEM SHALL 選択されたシナリオに対応する現在の素材構成（PET/Al/CPP等）と必須性能要件（酸素バリア性、遮光性等）を自動的にフォームに入力する

### FR-003: データベース検索

WHEN ユーザーが「提案を生成」ボタンをクリックした時
THE SYSTEM SHALL Convexデータベースから該当する性能要件を満たすサステナブル素材候補を検索する

### FR-004: Web情報収集

WHEN データベース検索が完了した時
THE SYSTEM SHALL Web検索APIを使用して最新のサステナブル素材トレンドや技術情報を収集する

### FR-005: AI提案生成

WHEN データベース検索とWeb情報収集が完了した時
THE SYSTEM SHALL 収集した情報をコンテキストとしてGemini APIまたはGPT APIに送信し、最適な代替素材候補3つと詳細な評価データをJSON形式で取得する

### FR-006: 比較レポート表示

WHEN AI提案が生成された時
THE SYSTEM SHALL 既存素材と代替素材の性能を以下の形式で表示する：
- レーダーチャート（物性、環境性能、コスト、安全性、供給安定性の5軸）
- 置換可能性スコア（0-100点）
- 推奨理由のテキスト説明

### FR-007: スコア計算

WHEN 代替素材の評価が完了した時
THE SYSTEM SHALL 「性能スコア × 0.5 + 環境スコア × 0.5」の計算式で総合スコアを算出し表示する

### FR-008: プロンプト管理

WHEN システムがLLM APIを呼び出す時
THE SYSTEM SHALL データベースの素材情報とWeb検索結果を含む詳細なコンテキストをプロンプトに埋め込む

### FR-009: 素材データ管理

WHEN 管理者が新しいサステナブル素材情報を追加する時
THE SYSTEM SHALL Convexデータベースに素材名、組成、性能データ、環境指標を保存する

### FR-010: リアルタイム同期

WHEN データベースの素材情報が更新された時
THE SYSTEM SHALL Convexのリアルタイム同期機能により、全クライアントに最新情報を即座に反映する

## 非機能要件

### NFR-001: パフォーマンス

THE SYSTEM SHALL AI提案の生成を10秒以内に完了する

### NFR-002: ユーザビリティ

THE SYSTEM SHALL 直感的で理解しやすいUIを提供し、技術的知識がないユーザーでも操作可能とする

### NFR-003: 可視化品質

THE SYSTEM SHALL Chart.jsを使用して、プロフェッショナルで視覚的にインパクトのあるグラフを描画する

### NFR-004: レスポンシブデザイン

THE SYSTEM SHALL モバイル、タブレット、デスクトップの各デバイスで適切に表示される

### NFR-005: エラーハンドリング

THE SYSTEM SHALL LLM APIエラー時に適切なエラーメッセージを表示し、システムがクラッシュしないようにする

## 制約条件

- 1日（約8-10時間）で実装可能な範囲に限定
- Convexデータベースには初期データとして5-10種類のサステナブル素材情報を登録
- ユーザー認証・ログイン機能は実装しない
- LCAデータやコストデータの厳密な正確性は保証しない
- 独自AIモデルの開発は行わない（既存LLM APIを使用）
- Web検索は公開APIの制限内で実行

## 受け入れ基準

- [ ] ユーザーが製品シナリオを選択できる
- [ ] 選択したシナリオに基づいて自動的にフォームが埋まる
- [ ] Convexデータベースから素材情報を取得できる
- [ ] Web検索で最新情報を収集できる
- [ ] データベースとWeb情報を統合したAI提案が生成される
- [ ] レーダーチャートが動的に描画される
- [ ] 総合スコアが表示される
- [ ] 推奨理由のテキストが表示される
- [ ] Convexのリアルタイム同期が機能する
- [ ] エラー時に適切なメッセージが表示される
- [ ] デモプレゼンテーションで安定して動作する
- [ ] ビジュアル的にインパクトのある結果が表示される